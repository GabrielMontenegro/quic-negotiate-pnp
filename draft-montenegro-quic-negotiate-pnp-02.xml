<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.2.9 -->

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
]>

<?rfc toc="yes"?>
<?rfc sortrefs="yes"?>
<?rfc symrefs="yes"?>

<rfc ipr="trust200902" docName="draft-montenegro-quic-negotiate-pnp-02" category="info">

  <front>
    <title abbrev="QUIC PNP Negotiation">QUIC Negotiation for Packet Number Protection</title>

    <author initials="G." surname="Montenegro" fullname="Gabriel Montenegro">
      <organization>Microsoft Corporation</organization>
      <address>
        <email>Gabriel.Montenegro@Microsoft.com</email>
      </address>
    </author>
    <author initials="N." surname="Banks" fullname="Nick Banks">
      <organization>Microsoft Corporation</organization>
      <address>
        <email>NiBanks@Microsoft.com</email>
      </address>
    </author>
    <author initials="P." surname="Balasubramanian" fullname="Praveen Balasubramanian">
      <organization>Microsoft Corporation</organization>
      <address>
        <email>PravB@Microsoft.com</email>
      </address>
    </author>

    <date />

    <area>Transport</area>
    <workgroup>QUIC</workgroup>
    <keyword>Internet-Draft</keyword>

    <abstract>


<t>This document defines an extension to reduce the cost of QUIC deployment in environments like datacenters by allowing packet number protection to be optionally disabled.</t>



    </abstract>


    <note title="Note to Readers">


<t>Discussion of this draft takes place on the QUIC working group mailing list
(quic@ietf.org), which is archived at
<eref target="https://mailarchive.ietf.org/arch/search/?email_list=quic">https://mailarchive.ietf.org/arch/search/?email_list=quic</eref>.</t>

<t>Working Group information can be found at <eref target="https://github.com/quicwg">https://github.com/quicwg</eref>; source
code and issues list for this draft can be found at
<eref target="https://github.com/quicwg/base-drafts/labels/-recovery">https://github.com/quicwg/base-drafts/labels/-recovery</eref>.</t>


    </note>


  </front>

  <middle>


<section anchor="introduction" title="Introduction">

<t>QUIC is a new transport for the internet. In its generality, there are features which are not well suited
for some environments. In particular, QUIC uses Packet Number Protection (PNP)
to prevent ossification and to provide unlinkability upon (voluntary) migration.
However, there are environments where these are not a concern, in particular,
connections within a datacenter.</t>

<t>This document defines a negotiation mechanism using transport parameters to disable PNP.
Internet facing nodes SHOULD NOT disable PNP, so
browsers, for example, should not implement this extension. On the other hand, configured nodes
within a datacenter could turn off PNP in their exchanges to avoid the CPU cost that PNP implies.</t>

</section>
<section anchor="conventions-and-definitions" title="Conventions and Definitions">

<t>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
“SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”, “MAY”, and “OPTIONAL” in this
document are to be interpreted as described in BCP 14 <xref target="RFC2119"/> <xref target="RFC8174"/>
when, and only when, they appear in all capitals, as shown here.</t>

</section>
<section anchor="transport-parameter-to-disable-packet-number-protection" title="Transport Parameter to Disable Packet Number Protection">

<t>This document defines a new transport parameter for QUIC <xref target="QUIC-TRANSPORT"/>:</t>

<t><list style="hanging">
  <t hangText='disable_packet_number_protection (0x000c ?, value TBD):'>
  The endpoint is disabling packet number protection as specified in <xref target="QUIC-TLS"/>.
This parameter is a zero-length value. This parameter only affects short headers.</t>
</list></t>

<t>A successful negotiation of the “disable_packet_number_protection” parameter
requires both peers to send this transport parameter as well as the “disable_migration”
parameter.</t>

<t>An endpoint MUST treat receipt of “disable_packet_number_protection” without the
“disable_migration” parameter as a connection error of type TRANSPORT_PARAMETER_ERROR.</t>

<t>Peers that have successfully negotiated the “disable_packet_number_protection” parameter
MUST NOT use packet number protection on short header packets.</t>

</section>
<section anchor="security-considerations" title="Security Considerations">

<t>Per section 6.11.5 of <xref target="QUIC-TLS"/>, PNP is used as a partial mitigation against linkability, and to
prevent ossification.
The “disable_packet_number_protection” parameter should be negotiated in environments in which these are not
a concern.</t>

</section>
<section anchor="iana-considerations" title="IANA Considerations">

<t>Per section 13.1 of <xref target="QUIC-TLS"/>, this document requests IANA assign a value for the new transport parameter
and record it in the registry for “QUIC Transport Parameters” under the “QUIC Protocol” heading.
IANA is further requested to assign a value with the first byte in the range 0x00 to 0xfe (in
hexadecimal) as follows:</t>

<texttable>
      <ttcol align='left'>Value</ttcol>
      <ttcol align='left'>Parameter Name</ttcol>
      <ttcol align='left'>Specification</ttcol>
      <c>0x000c</c>
      <c>disable_packet_number_protection</c>
      <c>This document</c>
</texttable>

</section>


  </middle>

  <back>

    <references title='Normative References'>

<reference anchor="QUIC-TRANSPORT" >
  <front>
    <title>QUIC: A UDP-Based Multiplexed and Secure Transport</title>
    <author initials="J." surname="Iyengar" fullname="Jana Iyengar" role="editor">
      <organization>Fastly</organization>
    </author>
    <author initials="M." surname="Thomson" fullname="Martin Thomson" role="editor">
      <organization>Mozilla</organization>
    </author>
    <date />
  </front>
  <seriesInfo name="Internet-Draft" value="draft-ietf-quic-transport-latest"/>
</reference>
<reference anchor="QUIC-TLS" >
  <front>
    <title>Using Transport Layer Security (TLS) to Secure QUIC</title>
    <author initials="M." surname="Thomson" fullname="Martin Thomson" role="editor">
      <organization>Mozilla</organization>
    </author>
    <author initials="S." surname="Turner" fullname="Sean Turner" role="editor">
      <organization>sn3rd</organization>
    </author>
    <date />
  </front>
  <seriesInfo name="Internet-Draft" value="draft-ietf-quic-tls-latest"/>
</reference>




<reference  anchor="RFC2119" target='https://www.rfc-editor.org/info/rfc2119'>
<front>
<title>Key words for use in RFCs to Indicate Requirement Levels</title>
<author initials='S.' surname='Bradner' fullname='S. Bradner'><organization /></author>
<date year='1997' month='March' />
<abstract><t>In many standards track documents several words are used to signify the requirements in the specification.  These words are often capitalized. This document defines these words as they should be interpreted in IETF documents.  This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='2119'/>
<seriesInfo name='DOI' value='10.17487/RFC2119'/>
</reference>



<reference  anchor="RFC8174" target='https://www.rfc-editor.org/info/rfc8174'>
<front>
<title>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</title>
<author initials='B.' surname='Leiba' fullname='B. Leiba'><organization /></author>
<date year='2017' month='May' />
<abstract><t>RFC 2119 specifies common key words that may be used in protocol  specifications.  This document aims to reduce the ambiguity by clarifying that only UPPERCASE usage of the key words have the  defined special meanings.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='8174'/>
<seriesInfo name='DOI' value='10.17487/RFC8174'/>
</reference>




    </references>



<section numbered="false" anchor="acknowledgments" title="Acknowledgments">

<t>Thanks to the following individuals for useful discussions: Christian Huitema, Martin Thomson,
Mikkel Fahnøe Jørgensen, Ian Swett, Martin Duke, Lucas Pardue.</t>

</section>


  </back>

<!-- ##markdown-source:
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

-->

</rfc>

