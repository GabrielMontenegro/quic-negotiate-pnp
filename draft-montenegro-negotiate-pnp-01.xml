<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.2.9 -->

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
]>

<?rfc toc="yes"?>
<?rfc sortrefs="yes"?>
<?rfc symrefs="yes"?>

<rfc ipr="trust200902" docName="draft-montenegro-quic-negotiate-pnp-01" category="std">

  <front>
    <title abbrev="QUIC PNP Negotiation">QUIC Negotiation for Packet Number Protection</title>

    <author initials="G." surname="Montenegro" fullname="Gabriel Montenegro">
      <organization>Microsoft Corporation</organization>
      <address>
        <email>Gabriel.Montenegro@Microsoft.com</email>
      </address>
    </author>
    <author initials="N." surname="Banks" fullname="Nick Banks">
      <organization>Microsoft Corporation</organization>
      <address>
        <email>NiBanks@Microsoft.com</email>
      </address>
    </author>
    <author initials="P." surname="Balasubramanian" fullname="Praveen Balasubramanian">
      <organization>Microsoft Corporation</organization>
      <address>
        <email>PravB@Microsoft.com</email>
      </address>
    </author>

    <date />

    <area>Transport</area>
    <workgroup>QUIC</workgroup>
    <keyword>Internet-Draft</keyword>

    <abstract>


<t>This document defines an extension to reduce the cost of QUIC deployment in environments like datacenters by allowing packet number protection to be optionally disabled.</t>



    </abstract>


    <note title="Note to Readers">


<t>Discussion of this draft takes place on the QUIC working group mailing list
(quic@ietf.org), which is archived at
<eref target="https://mailarchive.ietf.org/arch/search/?email_list=quic">https://mailarchive.ietf.org/arch/search/?email_list=quic</eref>.</t>

<t>Working Group information can be found at <eref target="https://github.com/quicwg">https://github.com/quicwg</eref>; source
code and issues list for this draft can be found at
<eref target="https://github.com/quicwg/base-drafts/labels/-recovery">https://github.com/quicwg/base-drafts/labels/-recovery</eref>.</t>


    </note>


  </front>

  <middle>


<section anchor="introduction" title="Introduction">

<t>QUIC is a new transport for the internet. In its generality, there are features which are not well suited
for some environments. In particular, QUIC uses Packet Number Protection (PNP)
to prevent ossification and to provide unlinkability upon (voluntary) migration.
However, there are environments where these are not a concern, in particular,
connections within a datacenter.</t>

<t>This document defines a negotiation mechanism using transport parameters to disable PNP.
Internet facing nodes SHOULD NOT disable PNP, so
browsers, for example, should not implement this extension. On the other hand, configured nodes
within a datacenter could turn off PNP in their exchanges to avoid the CPU cost that PNP implies.</t>

</section>
<section anchor="conventions-and-definitions" title="Conventions and Definitions">

<t>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
“SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”, “MAY”, and “OPTIONAL” in this
document are to be interpreted as described in BCP 14 <xref target="RFC2119"/> <xref target="RFC8174"/>
when, and only when, they appear in all capitals, as shown here.</t>

</section>
<section anchor="transport-parameter-to-disable-packet-number-protection" title="Transport Parameter to Disable Packet Number Protection">

<t>This document defines a new transport parameter for QUIC <xref target="QUIC-TRANSPORT"/>:</t>

<t><list style="hanging">
  <t hangText='disable_packet_number_protection (0x000c ?, value TBD):'>
  The endpoint is disabling packet number protection as specified in <xref target="QUIC-TLS"/>.
This parameter is a zero-length value. This parameter only affects short headers.</t>
</list></t>

<t>A successful negotiation of the “disable_packet_number_protection” parameter
requires both peers to send this transport parameter as well as the “disable_migration”
parameter.</t>

<t>An endpoint MUST treat receipt of “disable_packet_number_protection” without the
“disable_migration” parameter as a connection error of type TRANSPORT_PARAMETER_ERROR.</t>

<t>Peers that have successfully negotiated the “disable_packet_number_protection” parameter
MUST NOT use packet number protection on short header packets.</t>

</section>
<section anchor="security-considerations" title="Security Considerations">

<t>Per section 6.11.5 of <xref target="QUIC-TLS"/>, PNP is used as a partial mitigation against linkability, and to
prevent ossification.
The “disable_packet_number_protection” parameter should be negotiated in environments in which these are not
a concern.</t>

</section>
<section anchor="iana-considerations" title="IANA Considerations">

<t>Per section 13.1 of <xref target="QUIC-TLS"/>, this document requests IANA assign a value for the new transport parameter
and record it in the registry for “QUIC Transport Parameters” under the “QUIC Protocol” heading.
IANA is further requested to assign a value with the first byte in the range 0x00 to 0xfe (in
hexadecimal) as follows:</t>

<texttable>
      <ttcol align='left'>Value</ttcol>
      <ttcol align='left'>Parameter Name</ttcol>
      <ttcol align='left'>Specification</ttcol>
      <c>0x000c</c>
      <c>disable_packet_number_protection</c>
      <c>This document</c>
</texttable>

</section>


  </middle>

  <back>

    <references title='Normative References'>

<reference anchor="QUIC-TRANSPORT" >
  <front>
    <title>QUIC: A UDP-Based Multiplexed and Secure Transport</title>
    <author initials="J." surname="Iyengar" fullname="Jana Iyengar" role="editor">
      <organization>Fastly</organization>
    </author>
    <author initials="M." surname="Thomson" fullname="Martin Thomson" role="editor">
      <organization>Mozilla</organization>
    </author>
    <date />
  </front>
  <seriesInfo name="Internet-Draft" value="draft-ietf-quic-transport-latest"/>
</reference>
<reference anchor="QUIC-TLS" >
  <front>
    <title>Using Transport Layer Security (TLS) to Secure QUIC</title>
    <author initials="M." surname="Thomson" fullname="Martin Thomson" role="editor">
      <organization>Mozilla</organization>
    </author>
    <author initials="S." surname="Turner" fullname="Sean Turner" role="editor">
      <organization>sn3rd</organization>
    </author>
    <date />
  </front>
  <seriesInfo name="Internet-Draft" value="draft-ietf-quic-tls-latest"/>
</reference>




<reference  anchor="RFC2119" target='https://www.rfc-editor.org/info/rfc2119'>
<front>
<title>Key words for use in RFCs to Indicate Requirement Levels</title>
<author initials='S.' surname='Bradner' fullname='S. Bradner'><organization /></author>
<date year='1997' month='March' />
<abstract><t>In many standards track documents several words are used to signify the requirements in the specification.  These words are often capitalized. This document defines these words as they should be interpreted in IETF documents.  This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='2119'/>
<seriesInfo name='DOI' value='10.17487/RFC2119'/>
</reference>



<reference  anchor="RFC8174" target='https://www.rfc-editor.org/info/rfc8174'>
<front>
<title>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</title>
<author initials='B.' surname='Leiba' fullname='B. Leiba'><organization /></author>
<date year='2017' month='May' />
<abstract><t>RFC 2119 specifies common key words that may be used in protocol  specifications.  This document aims to reduce the ambiguity by clarifying that only UPPERCASE usage of the key words have the  defined special meanings.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='8174'/>
<seriesInfo name='DOI' value='10.17487/RFC8174'/>
</reference>




    </references>





  </back>

<!-- ##markdown-source:
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
vROIEeL/5E840wETAAA=

-->

</rfc>

